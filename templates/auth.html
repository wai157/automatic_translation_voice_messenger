{% extends 'base.html' %} 
{% block main %}
<div class="w-full h-full flex flex-1 justify-center items-center">
    <div class="w-1/3 h-fit flex flex-col p-4 rounded-2xl border-2 border-text">
        <h1 class="text-2xl text-center font-bold">{{ form.submit.label }}</h1>
        <form class="flex flex-col gap-4 mt-4" action="{{ request.path }}" method="POST">
            {{ form.csrf_token }}
            {{ form.username(class_="p-2 rounded-lg border-2 border-accent", placeholder="Username")}}
            {% for error in form.username.errors %}
            <script>
                toastr.warning("{{ error }}");
            </script>
            {% endfor%}
            {{ form.password(class_="p-2 rounded-lg border-2 border-accent", placeholder="Password")}}
            {% for error in form.password.errors %}
            <script>
                toastr.warning("{{ error }}");
            </script>
            {% endfor%}
            {% if request.path == "/auth/register" %}
            {{ form.confirm_password(class_="p-2 rounded-lg border-2 border-accent", placeholder="Confirm Password")}}
                {% for error in form.confirm_password.errors %}
                <script>
                    toastr.warning("{{ error }}");
                </script>
                {% endfor%}
            {% endif %}
            {{ form.submit(class_="p-2 rounded-lg bg-primary text-text font-bold cursor-pointer hover:bg-accent")}}
            <p class="p-2 text-text text-center">
                {% if request.path == '/auth/login' %}
                New here?
                <a class="text-sky-500 hover:text-sky-600" href="{{url_for('authentication.register')}}">Create account</a>
                {% else %}
                Already have an account?
                <a class="text-sky-500 hover:text-sky-600" href="{{url_for('authentication.login')}}">Login</a>
                {% endif %}
            </p>
        </form>
    </div>
</div>
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            {% if category == "success" %}
            <script>
                toastr.success("{{ message }}");
            </script>
            {% elif category == "warning" %}
            <script>
                toastr.warning("{{ message }}");
            </script>
            {% elif category == "error" %}
            <script>
                toastr.error("{{ message }}");
            </script>
            {% endif %}
        {% endfor %}
    {% endif %}
{% endwith %}
{% endblock %}
